<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Synth Preset Keyword Selector</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
        transition: background-color 0.3s ease, color 0.3s ease;
        }
        .keyword-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 0.5rem;
        }
        .custom-shadow {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .keyword-checkbox:checked + span {
            background-color: #4299e1;
            color: white;
        }
        .selected-tags {
            min-height: 2.5rem;
        }
        .toggle-bg {
        transition: background-color 0.2s ease-in-out;
        position: relative;
        }
        .toggle-bg:after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            background-color: white;
            border-radius: 9999px;
            height: 1.25rem;
            width: 1.25rem;
            transition: transform 0.2s ease-in-out;
        }
        input:checked + .toggle-bg {
            background-color: #4f46e5;
        }
        input:checked + .toggle-bg:after {
            transform: translateX(100%);
        }


        /* Dark mode styles */
        .dark {
            background-color: #1a1a1a;
            color: #e0e0e0;
        }
        .dark .bg-white {
            background-color: #2a2a2a;
        }
        .dark .bg-gray-50 {
            background-color: #333333;
        }
        .dark .text-gray-700 {
            color: #e0e0e0;
        }
        .dark .border-gray-300 {
            border-color: #4a4a4a;
        }
        .dark .text-indigo-700 {
            color: #a3a3a3;
        }
        .dark .bg-indigo-100 {
            background-color: #4a4a4a;
        }
        .dark .text-indigo-800 {
            color: #e0e0e0;
        }
        .dark .hover\:bg-indigo-100:hover {
            background-color: #5a5a5a;
        }
        .dark input[type="text"],
        .dark input[type="search"],
        .dark select {
            background-color: #3a3a3a;
            color: #e0e0e0;
            border-color: #4a4a4a;
        }
        .dark input[type="text"]:focus,
        .dark input[type="search"]:focus,
        .dark select:focus {
            border-color: #6a6a6a;
            outline: none;
            box-shadow: 0 0 0 2px rgba(106, 106, 106, 0.3);
        }
        .dark .keyword-checkbox + span {
            background-color: #3a3a3a;
            border-color: #4a4a4a;
            color: #e0e0e0;
        }
        .dark .keyword-checkbox:checked + span {
            background-color: #5a5a5a;
            color: #ffffff;
        }
        .dark #save-button {
            background-color: #4a4a4a;
            color: #e0e0e0;
        }
        .dark #save-button:hover {
            background-color: #5a5a5a;
        }
        .dark .toggle-bg {
            background-color: #4a4a4a;
            border-color: #5a5a5a;
        }
        .dark input:checked + .toggle-bg {
            background-color: #6a6a6a;
            border-color: #7a7a7a;
        }
        .toggle-bg {
        transition: background-color 0.2s ease-in-out;
        position: relative;
    }
    .toggle-bg:after {
        content: '';
        position: absolute;
        top: 2px;
        left: 2px;
        background-color: white;
        border-radius: 9999px;
        height: 1.25rem;
        width: 1.25rem;
        transition: transform 0.2s ease-in-out;
    }
    input:checked + .toggle-bg:after {
        transform: translateX(100%);
    }
    .dark .toggle-bg:after {
        background-color: #1a1a1a;
    }


    </style>
</head>
<body class="min-h-screen p-8">
    <div class="max-w-6xl mx-auto bg-white p-8 rounded-lg custom-shadow">
        <div class="flex justify-between items-center mb-6">
            <h1 class="text-3xl font-bold text-indigo-700 dark:text-indigo-300">Synth Preset Keyword Selector</h1>
            <div class="flex items-center">
                <span class="text-sm font-medium text-gray-700 dark:text-gray-300 mr-3">Light</span>
                <label for="dark-mode-toggle" class="inline-flex items-center cursor-pointer">
                    <div class="relative">
                        <input type="checkbox" id="dark-mode-toggle" class="sr-only">
                        <div class="toggle-bg w-11 h-6 bg-gray-200 rounded-full border border-gray-200 dark:bg-gray-600 dark:border-gray-500"></div>
                        <div class="dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform duration-200 ease-in-out"></div>
                    </div>
                </label>
                <span class="text-sm font-medium text-gray-700 dark:text-gray-300 ml-3">Dark</span>
            </div>
        </div>        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
            <div>
                <label for="preset-name" class="block text-sm font-medium text-gray-700 mb-1">Preset Name:</label>
                <input type="text" id="preset-name" class="w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-indigo-500 focus:border-indigo-500">
            </div>
            <div>
                <label for="preset-id" class="block text-sm font-medium text-gray-700 mb-1">Preset ID:</label>
                <input type="text" id="preset-id" class="w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-indigo-500 focus:border-indigo-500">
            </div>
        </div>

        <div class="mb-8">
            <label for="instrument" class="block text-sm font-medium text-gray-700 mb-1">Instrument:</label>
            <select id="instrument" class="w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-indigo-500 focus:border-indigo-500">
                <option value="">Select an instrument</option>
                <option value="Wavetable">Wavetable</option>
                <option value="Operator">Operator</option>
                <option value="Analog">Analog</option>
                <option value="Tension">Tension</option>
                <option value="Electric">Electric</option>
                <option value="Drift">Drift</option>
                <option value="Meld">Meld</option>
                <option value="Collision">Collision</option>
            </select>
        </div>
        <div class="mb-8 flex items-center">
            <span class="text-sm font-medium text-gray-700 mr-3">Preset Type:</span>
            <label for="is-rack" class="inline-flex items-center cursor-pointer">
                <span class="mr-3">Standalone</span>
                <div class="relative">
                    <input type="checkbox" id="is-rack" class="sr-only">
                    <div class="toggle-bg w-11 h-6 bg-gray-200 rounded-full border border-gray-200"></div>
                    <div class="dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform duration-200 ease-in-out"></div>
                </div>
                <span class="ml-3">Instrument Rack</span>
            </label>
        </div>        
        

        <div class="space-y-6">
            <div class="bg-gray-50 p-4 rounded-lg custom-shadow">
                <h2 class="text-lg font-semibold mb-3 text-indigo-700">Character</h2>
                <input type="text" class="keyword-search w-full border border-gray-300 rounded-md shadow-sm p-2 mb-3" placeholder="Search character keywords...">
                <div class="selected-tags flex flex-wrap gap-2 mb-3"></div>
                <div id="character-keywords"></div>
            </div>
            <div class="bg-gray-50 p-4 rounded-lg custom-shadow">
                <h2 class="text-lg font-semibold mb-3 text-indigo-700">Genre/Style</h2>
                <input type="text" class="keyword-search w-full border border-gray-300 rounded-md shadow-sm p-2 mb-3" placeholder="Search genre/style keywords...">
                <div class="selected-tags flex flex-wrap gap-2 mb-3"></div>
                <div id="genre-keywords"></div>
            </div>
            <div class="bg-gray-50 p-4 rounded-lg custom-shadow">
                <h2 class="text-lg font-semibold mb-3 text-indigo-700">Mood</h2>
                <input type="text" class="keyword-search w-full border border-gray-300 rounded-md shadow-sm p-2 mb-3" placeholder="Search mood keywords...">
                <div class="selected-tags flex flex-wrap gap-2 mb-3"></div>
                <div id="mood-keywords"></div>
            </div>
            <div class="bg-gray-50 p-4 rounded-lg custom-shadow">
                <h2 class="text-lg font-semibold mb-3 text-indigo-700">Modulation</h2>
                <input type="text" class="keyword-search w-full border border-gray-300 rounded-md shadow-sm p-2 mb-3" placeholder="Search modulation keywords...">
                <div class="selected-tags flex flex-wrap gap-2 mb-3"></div>
                <div id="modulation-keywords"></div>
            </div>
            <div class="bg-gray-50 p-4 rounded-lg custom-shadow">
                <h2 class="text-lg font-semibold mb-3 text-indigo-700">Inspiration</h2>
                <input type="text" class="keyword-search w-full border border-gray-300 rounded-md shadow-sm p-2 mb-3" placeholder="Search inspiration keywords...">
                <div class="selected-tags flex flex-wrap gap-2 mb-3"></div>
                <div id="inspiration-keywords"></div>
            </div>
            <div class="bg-gray-50 p-4 rounded-lg custom-shadow">
                <h2 class="text-lg font-semibold mb-3 text-indigo-700">Timbre</h2>
                <input type="text" class="keyword-search w-full border border-gray-300 rounded-md shadow-sm p-2 mb-3" placeholder="Search timbre keywords...">
                <div class="selected-tags flex flex-wrap gap-2 mb-3"></div>
                <div id="timbre-keywords"></div>
            </div>
            <div class="bg-gray-50 p-4 rounded-lg custom-shadow">
                <h2 class="text-lg font-semibold mb-3 text-indigo-700">Aesthetics</h2>
                <input type="text" class="keyword-search w-full border border-gray-300 rounded-md shadow-sm p-2 mb-3" placeholder="Search aesthetics keywords...">
                <div class="selected-tags flex flex-wrap gap-2 mb-3"></div>
                <div id="aesthetics-keywords"></div>
            </div>
        </div>

        <div class="mt-8 text-center">
            <button id="save-button" class="px-6 py-3 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition duration-150 ease-in-out">
                Save Preset Annotation
            </button>
        </div>        
    </div>

    <script>
        const keywords = {
            character: {
                Texture: ["Soft", "Harsh", "Smooth", "Rough", "Crisp", "Mellow", "Gritty", "Clean", "Fuzzy", "Sharp", "Rounded", "Silky", "Brittle", "Liquid", "Solid", "Airy", "Dense", "Glassy", "Metallic", "Wooden", "Plasticky", "Rubbery", "Gelatinous", "Crystalline", "Viscous"],
                Tone: ["Warm", "Cold", "Bright", "Dark", "Rich", "Thin", "Lush", "Sparse", "Full", "Hollow", "Resonant", "Muffled", "Shimmering", "Dull", "Brilliant", "Muted", "Vibrant", "Clear", "Muddy", "Transparent", "Opaque", "Saturated", "Pristine", "Gritty", "Velvety"],
                Character: ["Organic", "Synthetic", "Analog", "Digital", "Ethereal", "Grungy", "Polished", "Raw", "Refined", "Coarse", "Sleek", "Raspy", "Buttery", "Crystalline", "Murky", "Pristine", "Grainy", "Lustrous", "Opaque", "Viscous", "Holographic", "Pixelated", "Quantized", "Aliased", "Overdriven"],
                Intensity: ["Punchy", "Plucky", "Sizzling", "Thick", "Crunchy", "Woolly", "Velvety", "Icy", "Searing", "Piercing", "Gentle", "Aggressive", "Robust", "Delicate", "Gossamer", "Hefty", "Wispy", "Jagged", "Feathery", "Leathery", "Biting", "Crushing", "Scorching", "Glacial", "Abrasive"]
            },
            genre: {
                Electronic: ["Ambient", "Techno", "House", "Trance", "Drum and Bass", "Dubstep", "IDM", "Breakbeat", "Electro", "Synthwave", "Vaporwave", "Chillwave", "Industrial", "Glitch", "Future Bass", "Hardstyle", "Psytrance", "Goa", "Minimal", "Electronica", "Neurofunk", "Breakcore", "Jungle", "Footwork", "Gabber"],
                Pop_Rock: ["Pop", "Rock", "Synthpop", "New Wave", "Post-punk", "Shoegaze", "Alternative", "Indie", "Electropop", "Art Pop", "Dream Pop", "Noise Pop", "Power Pop", "Psychedelic Pop", "Britpop", "Indie Rock", "Post-Rock", "Math Rock", "Noise Rock", "Art Rock", "Progressive Rock", "Krautrock", "Glam Rock", "Space Rock", "Grunge"],
                Hip_Hop: ["Hip-hop", "Trap", "Cloud Rap", "Grime", "Drill", "Abstract Hip-hop", "Boom Bap", "Conscious Hip-hop", "Gangsta Rap", "Southern Hip-hop", "East Coast Hip-hop", "West Coast Hip-hop", "Alternative Hip-hop", "Experimental Hip-hop", "Lofi Hip-hop", "Turntablism", "Horrorcore", "Phonk", "Crunk", "Mumble Rap", "Chopped and Screwed", "G-Funk", "Trip Hop", "Instrumental Hip-hop", "UK Garage"],
                Other_Genres: ["Jazz", "Classical", "Funk", "Disco", "Reggae", "Dub", "World Music", "Folk", "Blues", "Country", "R&B", "Soul", "Gospel", "Experimental", "Avant-garde", "Fusion", "Crossover", "Ethnic", "Traditional", "Cinematic", "Neoclassical", "Free Jazz", "Microtonal", "Gamelan", "Musique Concrète"]
            },
            mood: {
                Positive: ["Uplifting", "Joyful", "Euphoric", "Energetic", "Playful", "Optimistic", "Triumphant", "Confident", "Empowering", "Liberating", "Blissful", "Carefree", "Exhilarated", "Passionate", "Ecstatic", "Hopeful", "Inspiring", "Cheerful", "Lively", "Radiant"],
                Negative: ["Melancholic", "Dark", "Somber", "Gloomy", "Anxious", "Tense", "Angry", "Lonely", "Oppressive", "Mournful", "Depressing", "Frustrated", "Bitter", "Resentful", "Cynical", "Desperate", "Helpless", "Pessimistic", "Apathetic", "Numb"],
                Neutral: ["Calm", "Serene", "Relaxed", "Mellow", "Contemplative", "Introspective", "Pensive", "Meditative", "Aloof", "Detached", "Indifferent", "Neutral", "Balanced", "Composed", "Reserved", "Stoic", "Steady", "Grounded", "Centered", "Unbiased"],
                Complex: ["Mysterious", "Ethereal", "Nostalgic", "Bittersweet", "Wistful", "Yearning", "Surreal", "Dreamy", "Haunting", "Enchanting", "Ambivalent", "Conflicted", "Paradoxical", "Enigmatic", "Perplexing", "Intriguing", "Uncanny", "Elusive", "Ineffable", "Profound"]
            },
            modulation: {
                Movement: ["Evolving", "Static", "Pulsating", "Sweeping", "Wobbling", "Fluttering", "Morphing", "Gliding", "Undulating", "Flowing", "Swelling", "Fading", "Warping", "Twisting", "Bending", "Fluctuating", "Oscillating", "Spiraling", "Zigzagging", "Bouncing", "Cascading", "Plummeting", "Soaring", "Gyrating", "Writhing"],
                Rhythm: ["Rhythmic", "Arpeggiated", "Stuttering", "Jerky", "Smooth", "Cyclical", "Stepped", "Random", "Syncopated", "Polyrhythmic", "Groovy", "Swinging", "Steady", "Erratic", "Pulsing", "Staccato", "Legato", "Dotted", "Triplet", "Shuffled", "Euclidean", "Isorhythmic", "Metric modulation", "Hemiola", "Rubato"],
                Dynamics: ["Crescendo", "Decrescendo", "Swelling", "Pumping", "Ducking", "Expanding", "Contracting", "Breathing", "Throbbing", "Surging", "Fading", "Blooming", "Collapsing", "Erupting", "Imploding", "Rising", "Falling", "Swelling", "Receding", "Pulsating", "Sidechain", "Multiband", "Parallel", "Limiting", "Expansion"],
                Effects: ["Phasing", "Tremolo", "Vibrato", "Flanging", "Chorus", "Delay", "Reverb", "Distortion", "Bitcrushing", "Filtering", "Resonance", "Compression", "Expansion", "Saturation", "Modulation", "Pitch-shifting", "Time-stretching", "Granular", "Spectral", "Convolution", "Comb filtering", "Waveshaping", "Formant shifting", "Frequency shifting", "Ring modulation"]
            },
            inspiration: {
                Eras: ["80s synth pop", "90s rave", "70s disco", "60s psychedelia", "2000s video games", "Retro arcade", "Vintage analog synths", "Modern digital synths", "Retro-futurism", "Vaporwave aesthetics", "Future Funk", "Synthwave", "Outrun", "Y2K", "Cyberpunk", "Steampunk", "Art Deco", "Baroque", "Renaissance", "Ancient", "Afrofuturism", "Space Age", "Digital Age", "Information Era", "Post-Internet"],
                Media: ["Sci-fi movies", "Horror films", "Fantasy literature", "Comic books", "Anime", "Cartoons", "Abstract art", "Impressionist paintings", "Surrealist art", "Pop art", "Pixel art", "Glitch art", "Cyberpunk literature", "Dystopian novels", "Utopian visions", "Avant-garde films", "Silent movies", "Film noir", "Documentaries", "Music videos", "Virtual reality", "Augmented reality", "Interactive installations", "Generative art", "AI art"],
                Nature: ["Nature sounds", "Ocean waves", "Forest ambience", "Thunderstorms", "Wind through trees", "Bird calls", "Insect chirps", "Flowing water", "Crackling fire", "Ice cracking", "Leaves rustling", "Rain on a tin roof", "Whale songs", "Wolf howls", "Lion roars", "Dolphin clicks", "Frog croaks", "Bee buzzing", "Snake hiss", "Elephant trumpets", "Geothermal activity", "Avalanche", "Glacier calving", "Sand dunes shifting", "Coral reef"],
                Urban: ["Urban soundscapes", "Traffic noise", "Subway rumble", "Construction sites", "Busy cafes", "Street performers", "Police sirens", "Car horns", "Footsteps on pavement", "Bicycle bells", "Skateboards rolling", "Crowd chatter", "Street vendors", "Airport announcements", "Train station ambience", "Factory machinery", "Office sounds", "School playground", "Shopping mall ambience", "Sports stadium roar", "Data center hum", "Wind turbines", "Solar panel farms", "Cryptocurrency mining rigs", "Smart city infrastructure"]
            },
            timbre: {
                Harmonic_Content: ["Fundamental", "Overtone-rich", "Harmonic", "Inharmonic", "Spectral", "Formant", "Resonant", "Filtered", "Buzzy", "Pure", "Complex", "Simple", "Partials", "Harmonics", "Subharmonics", "Formant-shifted", "Additive", "Subtractive", "FM", "Wavetable", "Aliasing", "Foldover", "Comb filtered", "Karplus-Strong", "Physical modeling"],
                Envelope: ["Attack", "Decay", "Sustain", "Release", "Plucky", "Slow attack", "Fast attack", "Long release", "Short release", "Percussive", "Pad-like", "Swelling", "Fading", "Gated", "Sustained", "Transient", "Envelope follower", "ADSR", "Multistage", "Looping", "Retriggering", "One-shot", "Decay-only", "Inverse", "Stepped"],
                Spectrum: ["Low-pass", "High-pass", "Band-pass", "Notch", "Comb", "Formant", "Vowel", "Vocal", "Nasal", "Sibilant", "Plosive", "Breathy", "Whispered", "Spoken", "Sung", "Screamed", "Growled", "Pitched", "Unpitched", "Noisy", "Tonal", "Atonal", "Microtonal", "Spectral freeze", "Vocoded"]
            },
            /*technique: {
                Playing_Style: ["Legato", "Staccato", "Portamento", "Glissando", "Arpeggio", "Chord", "Monophonic", "Polyphonic", "Unison", "Layered", "Split", "Velocity sensitive", "Aftertouch", "Pitch bend", "Modulation wheel", "Expression pedal", "Keyswitching", "Round-robin", "Crossfade", "Multisampled", "MPE", "Polyphonic aftertouch", "Force sensing", "Gesture control", "Breath control"],
                Sound_Design: ["Layering", "Stacking", "Morphing", "Crossfading", "Sampling", "Resampling", "Granular", "Wavetable", "Additive", "Subtractive", "FM synthesis", "AM synthesis", "Physical modeling", "Karplus-Strong", "Waveshaping", "Vector synthesis", "Resynthesis", "Vocoding", "Convolution", "Spectral processing", "Concatenative synthesis", "Corpus-based synthesis", "Phase distortion", "Scanned synthesis", "Cellular automata"],
                Processing: ["Compression", "EQ", "Saturation", "Limiting", "Multiband processing", "Transient shaping", "De-essing", "Noise reduction", "Stereo widening", "M/S processing", "Parallel processing", "Upsampling", "Downsampling", "Bit reduction", "Sample rate reduction", "Formant shifting", "Pitch correction", "Time alignment", "Phase alignment", "Harmonic enhancement"],
                Modulation_Sources: ["LFO", "Envelope", "Step sequencer", "Random", "Sample and hold", "Noise", "Audio rate", "MIDI CC", "Macro control", "Modulation matrix", "Envelope follower", "Peak follower", "RMS follower", "Pitch tracker", "Triggered random", "Probability", "XY pad", "Motion recording", "MPE", "Gesture mapping"]
            },
            spatial: {
                Stereo_Field: ["Wide", "Narrow", "Mono", "Stereo", "Mid-side", "Haas effect", "Pseudo-stereo", "Binaural", "Stereo imaging", "Panning", "Auto-pan", "Stereo widening", "Stereo narrowing", "Stereo balance", "Stereo spread", "Stereo enhancement", "Mono compatibility", "Phase correlation", "Stereo field manipulation", "Stereo separation"],
                Depth: ["Front", "Back", "Near", "Far", "Intimate", "Distant", "Layered", "Flat", "3D", "Holographic", "Immersive", "Surrounding", "Enveloping", "Spacious", "Claustrophobic", "Cavernous", "Intimate", "Room-filling", "Atmospheric", "Ethereal"],
                Room_Simulation: ["Dry", "Wet", "Room", "Hall", "Chamber", "Cathedral", "Arena", "Stadium", "Plate", "Spring", "Gated reverb", "Nonlinear reverb", "Convolution reverb", "Algorithmic reverb", "Shimmer reverb", "Reverse reverb", "Early reflections", "Late reflections", "Diffusion", "Decay"]
            },
            technical: {
                Signal_Path: ["Serial", "Parallel", "Feedback loop", "Feed-forward", "Sidechaining", "Multiband", "Linear", "Nonlinear", "Adaptive", "Recursive", "Iterative", "Cascaded", "Branching", "Merging", "Splitting", "Routing", "Bussing", "Aux send", "Insert", "Master"],
                DSP_Concepts: ["Fourier transform", "Wavelet transform", "Convolution", "Impulse response", "Transfer function", "State space", "Biquad filter", "Allpass filter", "Comb filter", "Hilbert transform", "Autocorrelation", "Cross-correlation", "Windowing", "Oversampling", "Undersampling", "Nyquist theorem", "Aliasing", "Quantization", "Dithering", "Noise-shaping"],
                Synthesis_Methods: ["Subtractive", "Additive", "FM (Frequency Modulation)", "PM (Phase Modulation)", "AM (Amplitude Modulation)", "RM (Ring Modulation)", "Wavetable", "Vector", "Granular", "Physical Modeling", "Karplus-Strong", "Waveguide", "Modal", "Spectral", "Formant", "Linear Arithmetic", "Sample-based", "Concatenative", "Scanned", "Phase Distortion"],
                Control_Systems: ["MIDI", "OSC (Open Sound Control)", "CV/Gate", "MPE (MIDI Polyphonic Expression)", "Automation", "Modulation matrix", "Macro controls", "Learn mode", "NRPN (Non-Registered Parameter Number)", "SysEx (System Exclusive)", "TRS (Tip Ring Sleeve)", "USB", "Bluetooth MIDI", "Network MIDI", "MIDI Timecode", "MIDI Clock", "MIDI Machine Control", "ReWire", "VST", "AU (Audio Unit)"]
            },
            performance: {
                Playability: ["Responsive", "Expressive", "Dynamic", "Intuitive", "Tactile", "Velocity-sensitive", "Pressure-sensitive", "Gesture-controlled", "Multi-touch", "MPE-compatible", "Aftertouch", "Breath-controlled", "Ribbon-controlled", "Pad-based", "Key-based", "Knob-per-function", "Menu diving", "Preset morphing", "Performance-oriented", "Studio-oriented"],
                Live_Techniques: ["Loop-based", "On-the-fly editing", "Real-time processing", "Beat-synced", "Tempo-synced", "Phrase-based", "One-shot triggers", "Generative", "Algorithmic", "Probabilistic", "Chaotic", "Reactive", "Interactive", "Collaborative", "Network-synced", "Cloud-based", "AI-assisted", "Gesture-mapping", "Motion-tracking", "Sensor-driven"]
            },*/
            aesthetics: {
                Sonic_Qualities: ["Lo-fi", "Hi-fi", "Retro", "Futuristic", "Organic", "Synthetic", "Hybrid", "Clean", "Dirty", "Polished", "Raw", "Smooth", "Rough", "Warm", "Cold", "Analog", "Digital", "Glitchy", "Pristine", "Distorted"],
                Cultural_References: ["Vintage", "Modern", "Classic", "Avant-garde", "Minimalist", "Maximalist", "Fusion", "Crossover", "Underground", "Mainstream", "Experimental", "Commercial", "Authentic", "Reimagined", "Nostalgic", "Innovative", "Traditional", "Disruptive", "Timeless", "Trendy"]
            }
        };

        function populateKeywords(categoryId, keywordList) {
            const container = document.getElementById(categoryId);
            Object.entries(keywordList).forEach(([subcategory, words]) => {
                const subcategoryDiv = document.createElement('div');
                subcategoryDiv.className = 'mb-4';
                subcategoryDiv.innerHTML = `<h3 class="font-semibold text-gray-700 mb-2">${subcategory}</h3>`;
                const grid = document.createElement('div');
                grid.className = 'keyword-grid';
                
                words.forEach(keyword => {
                    const div = document.createElement('div');
                    div.innerHTML = `
                        <label class="inline-flex items-center">
                            <input type="checkbox" class="hidden keyword-checkbox" value="${keyword}" data-category="${categoryId}">
                            <span class="px-2 py-1 rounded-full text-sm bg-white border border-gray-300 cursor-pointer hover:bg-indigo-100 transition-colors duration-200">${keyword}</span>
                        </label>
                    `;
                    grid.appendChild(div);
                });
                
                subcategoryDiv.appendChild(grid);
                container.appendChild(subcategoryDiv);
            });
        }

        Object.keys(keywords).forEach(category => {
            populateKeywords(`${category}-keywords`, keywords[category]);
        });

        // Add event listeners for search functionality
        document.querySelectorAll('.keyword-search').forEach(searchInput => {
            searchInput.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                const category = this.closest('div').querySelector('[id$="-keywords"]').id.split('-')[0];
                const keywordElements = document.querySelectorAll(`#${category}-keywords .keyword-grid label`);
                
                keywordElements.forEach(elem => {
                    const keyword = elem.textContent.trim().toLowerCase();
                    if (keyword.includes(searchTerm)) {
                        elem.style.display = '';
                    } else {
                        elem.style.display = 'none';
                    }
                });
            });
        });

        // Add event listeners for keyword selection and tag creation
        document.querySelectorAll('.keyword-checkbox').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                const category = this.dataset.category.split('-')[0];
                const tagContainer = this.closest('.bg-gray-50').querySelector('.selected-tags');
                
                if (this.checked) {
                    const tag = document.createElement('span');
                    tag.className = 'bg-indigo-100 text-indigo-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded';
                    tag.textContent = this.value;
                    tag.dataset.category = category;
                    
                    const removeButton = document.createElement('button');
                    removeButton.className = 'ml-1 text-indigo-600 hover:text-indigo-900';
                    removeButton.textContent = '×';
                    removeButton.onclick = function() {
                        checkbox.checked = false;
                        tag.remove();
                    };
                    
                    tag.appendChild(removeButton);
                    tagContainer.appendChild(tag);
                } else {
                    const tag = tagContainer.querySelector(`[data-category="${category}"]:has(button)`);
                    if (tag) tag.remove();
                }
            });
        });

        document.getElementById('save-button').addEventListener('click', function() {
            const presetName = document.getElementById('preset-name').value;
            const presetId = document.getElementById('preset-id').value;
            const isRack = document.getElementById('is-rack').checked;
            const instrument = document.getElementById('instrument').value;
            const selectedKeywords = {
                character: [],
                genre: [],
                mood: [],
                modulation: [],
                inspiration: [],
                timbre: [],
                aesthetics: []
            };

            Object.keys(keywords).forEach(category => {
                document.querySelectorAll(`#${category}-keywords input:checked`).forEach(checkbox => {
                    selectedKeywords[category].push(checkbox.value);
                });
            });

            const jsonData = JSON.stringify({
                id: presetId,
                name: presetName,
                instrument: instrument,
                isRack: isRack,
                keywords: selectedKeywords
            }, null, 2);

            const blob = new Blob([jsonData], {type: 'application/json'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${presetId || presetName.replace(/\s+/g, '_')}.json`;
            a.click();
        });


        // Dark mode toggle functionality
        const darkModeToggle = document.getElementById('dark-mode-toggle');
        const body = document.body;

        darkModeToggle.addEventListener('change', () => {
            body.classList.toggle('dark');
            localStorage.setItem('darkMode', body.classList.contains('dark'));
        });

        // Check for saved dark mode preference
        if (localStorage.getItem('darkMode') === 'true') {
            body.classList.add('dark');
            darkModeToggle.checked = true;
        }

    </script>
</body>
</html>


                